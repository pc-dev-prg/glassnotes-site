---
import Layout from "../layouts/Layout.astro";
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
import WaitlistModal from "../components/WaitlistModal.svelte";
import versionData from "../../version.json";
---

<Layout
  title="Pricing | GlassNotes"
  description="Simple and transparent pricing for GlassNotes."
>
  <Navigation transition:persist />

  <main transition:animate="slide">
    <section class="pricing-hero">
      <h1 class="reveal">Choose your flow.</h1>
      <p class="reveal delay-1">
        From casual thoughts to professional knowledge bases.<br />
        Select the plan that matches your creative energy.
      </p>

      <div class="pricing-grid">
        <!-- FREE Plan -->
        <div class="pricing-card glass reveal delay-2">
          <div class="plan-info">
            <div class="price-section">
              <h3>FREE</h3>
              <div class="price">$0 <span>/ forever</span></div>
            </div>
            <p>The pure, essential writing experience.</p>
          </div>
          <ul class="plan-features">
            <li class="pill-feature">
              <div class="feature-content">
                <strong>20 notes & 5 folders limit</strong>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Modern Markdown Editor</strong>
                <span class="desc">Formatting, tables, and tasks.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Global Quick Note</strong>
                <span class="desc">Capture thoughts from anywhere.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Secure Local Storage</strong>
                <span class="desc">Your data stays on your device.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Folders & Tags</strong>
                <span class="desc">Essential organization tools.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>10+ Languages</strong>
                <span class="desc">English, Czech, German, and more.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Wiki-links</strong>
                <span class="desc">Build a persistent web of knowledge.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Infinite Note History</strong>
                <span class="desc">Every version recorded.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>One-Click Restore</strong>
                <span class="desc">Instantly revert to any version.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Advanced Smart Folders</strong>
                <span class="desc">Dynamic multi-criteria filters.</span>
              </div>
            </li>
            <li>
              <div class="feature-content text-center">
                <a href="/product" class="feature-link">And much more â†’</a>
              </div>
            </li>
          </ul>
          <a href={versionData.downloadUrl} class="cta-button secondary"
            >Download the App</a
          >
        </div>

        <!-- PLUS Plan -->
        <div class="pricing-card glass reveal delay-3">
          <div class="plan-info">
            <div class="price-section">
              <h3>PLUS</h3>
              <div class="price">$24.99 <span>/ once</span></div>
            </div>
            <p>Everything you need for personal local knowledge base.</p>
          </div>
          <ul class="plan-features">
            <li class="pill-feature green">
              <div class="feature-content">
                <strong>Unlimited notes & folders</strong>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>All features as FREE</strong>
                <span class="desc">Everything in the free tier included.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Local JSON export</strong>
                <span class="desc">Backup your data in standard format.</span>
              </div>
            </li>
            <li class="coming-soon">
              <div class="feature-content">
                <strong>Basic AI functions</strong>
                <span class="desc">With your own API key.</span>
              </div>
            </li>
          </ul>
          <a href="#" class="cta-button primary">Upgrade to Plus</a>
        </div>

        <!-- PRO Plan -->
        <div class="pricing-card glass pro-featured reveal delay-4">
          <div class="popular-badge">MOST POPULAR</div>
          <div class="plan-info">
            <div class="price-section">
              <h3>PRO</h3>
              <div class="price">$4.99 <span>/ month</span></div>
              <div class="price-annual">or $49.99 / year</div>
            </div>
            <p>Unleash the full potential of your knowledge ecosystem.</p>
          </div>
          <ul class="plan-features">
            <li>
              <div class="feature-content">
                <strong>All features as PLUS</strong>
                <span class="desc">Everything in the Plus tier included.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Real-time Cloud Sync</strong>
                <span class="desc">Seamless sync across Mac and Web.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Universal Web App</strong>
                <span class="desc">Access from any modern browser.</span>
              </div>
            </li>
            <li>
              <div class="feature-content">
                <strong>Lifetime Updates</strong>
                <span class="desc">Access to all future features.</span>
              </div>
            </li>
            <li class="coming-soon">
              <div class="feature-content">
                <strong>Basic AI functions</strong>
                <span class="desc">50 queries/month included.</span>
              </div>
            </li>
          </ul>
          <a href="#" class="cta-button primary">Unlock Pro Power</a>
        </div>
      </div>

      <div class="ai-addon reveal delay-5">
        <div class="pricing-card glass ai-tier">
          <div class="ai-badge">PRO ADD-ON</div>
          <div class="ai-content-wrapper">
            <div class="plan-info">
              <div class="price-section">
                <h3>AI Plus</h3>
                <div class="price">+$5 <span>/ month</span></div>
              </div>
              <p>For high-intensity workflows and deep insights.</p>
              <div class="model-attribution">
                <span class="powered-by">Powered by Google Gemini 3 flash</span>
                <span class="model-desc"
                  >One of the most advanced models on the market</span
                >
              </div>
            </div>
            <ul class="plan-features ai-features-grid">
              <li>
                <div class="feature-content">
                  <strong>Advanced AI functions</strong>
                  <span class="desc"
                    >Proactive summarization and contextual drafting.</span
                  >
                </div>
              </li>
              <li>
                <div class="feature-content">
                  <strong>Unlimited queries</strong>
                  <span class="desc">No limits on your AI interactions.</span>
                </div>
              </li>
              <li>
                <div class="feature-content">
                  <strong>Deep Vault Insight</strong>
                  <span class="desc"
                    >AI understands your entire knowledge web.</span
                  >
                </div>
              </li>
            </ul>
          </div>
          <div class="addon-footer">
            <span class="requires">* Only available with GlassNotes PRO</span>
            <button
              class="cta-button primary waitlist-trigger disabled"
              data-waitlist-id="82395224-e54b-4de5-80ae-554d66bc7146"
              disabled
            >
              Add to Pro
              <span class="btn-badge">COMING SOON</span>
            </button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <Footer transition:persist />

  <WaitlistModal client:load />

  <script>
    function setupWaitlistTriggers() {
      const triggers = document.querySelectorAll(".waitlist-trigger");
      triggers.forEach((trigger) => {
        trigger.addEventListener("click", () => {
          const waitlistId = trigger.getAttribute("data-waitlist-id");
          window.dispatchEvent(
            new CustomEvent("open-waitlist-modal", {
              detail: { waitlistId },
            }),
          );
        });
      });
    }

    setupWaitlistTriggers();

    document.addEventListener("astro:after-swap", () => {
      setupWaitlistTriggers();
    });
  </script>
</Layout>
